{% extends "admin/base.html" %}

{% block title %}Edit course{% endblock title %}

{% block scripts %}
    <link rel="stylesheet" type="text/css" href="/assets/js/markitup/skins/markitup/style.css" />
    <link rel="stylesheet" type="text/css" href="/assets/js/markitup/sets/markdown/style.css" />

    <script type="text/javascript" src="/assets/js/markitup/jquery.markitup.js"></script>
    <script type="text/javascript" src="/assets/js/markitup/sets/markdown/set.js"></script>

    <script type="text/javascript" src="/assets/js/admin/slugify.js"></script>

    <script language="javascript">
        $(document).ready(function()	{
            $('#markdown').markItUp(mySettings);
        });
    </script>

    <script src="/assets/js/admin/prices.js"></script>
{% endblock scripts %}

{% block main_content %}
<div class="main">
    <!-- Breadcrumb -->
    <div class="row">
        <div class="col-lg-12">
            <ol class="breadcrumb">
                <li>
                    <i class="fa fa-institution"></i>  <a href="/admin/courses">Courses</a>
                </li>
                <li class="active">
                    <i class="fa fa-table"></i>  <a href="/admin/course/{{course.get_id}}">{{ course.title }}</a>
                </li>
                <li class="active">
                    <i class="fa fa-plus-square-o"></i> Edit course
                </li>
            </ol>

            <h1 class="page-header">
                Edit {{ course.title }}
            </h1>
        </div>
    </div>
    <!-- Breadcrumb end -->

    <div class="row">
        <div class="col-lg-7">
            <form action="/admin/course/{{course.get_id}}/edit" method="post">
                <div class="form-group">
                    <label>Type</label>
                    <select class="form-control" name="course-type" id="courseType">
                        <option value="{{course.course_type}}" selected>{{ selected_course_type.title }}</option>
                        <option disabled>------------------------------</option>
                        {% for ctype in course_types %}
                            <option value="{{ ctype.get_id }}">{{ ctype.title }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label>Main instructor</label>
                    <select class="form-control" name="instructor" id="courseInstructor">
                        {% if course.course_instructors[0] %}
                            <option value="{{course.course_instructors[0].user_id}}|{{ course.course_instructors[0].name }}" selected>{{ course.course_instructors[0].name }}</option>
                        {% endif %}
                        <option disabled>------------------------------</option>
                        {% for instructor in instructors %}
                            <option value="{{ instructor.user_id }}|{{ instructor.full_name }}">{{ instructor.full_name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label>Partner organization</label>
                    <select class="form-control" name="partner" id="coursePartner">
                        {% if course.partners[0] %}
                            <option value="{{course.partners[0].get_id}}" selected>{{ course.partners[0].title }}</option>
                        {% endif %}
                        <option disabled>------------------------------</option>
                        <option value="">No partner</option>
                        {% for partner in partners %}
                            <option value="{{ partner.get_id }}">{{ partner.title }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label>Category (like Programming, Graphic design etc.)</label>
                    <input type="text" class="form-control" value="{{course.category}}" placeholder="Category" name="category" id="courseCategory">
                </div>

                <div class="form-group">
                    <label>Tag</label>
                    <p>Examples: 2 dni, 12 tednov itd. Loƒçi z vejicami (brez presledkov).</p>
                    <input type="text" class="form-control" value="{{tags}}" name="tags" id="courseTags">
                </div>

                <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="form-control" value="{{course.title}}" placeholder="Title" name="title" id="courseTitle">
                </div>

                <div class="form-group">
                    <label>City</label>
                    <input type="text" class="form-control" value="{{course.city}}" placeholder="City" name="city" id="courseCity">
                </div>

                <div class="form-group">
                    <label>Place</label>
                    <input type="text" class="form-control" value="{{course.place}}" placeholder="Place" name="place" id="coursePlace">
                </div>

                <div class="form-group">
                    <label>Number of spots available</label>
                    <input type="text" class="form-control" value="{{course.spots}}" placeholder="Spots" name="spots" id="courseSpots">
                </div>

                <div class="form-group">
                    <label>Start date</label>
                    <input type="date" class="form-control" value="{{course.start_date}}" name="start-date" id="courseStartDate">
                </div>

                <div class="form-group">
                    <label>End date</label>
                    <input type="date" class="form-control" value="{{course.end_date}}" name="end-date" id="courseEndDate">
                </div>

                <div class="form-group input_fields_wrap">
                    <label>Price(s)</label>
                    <p>Example: 147.0 &emsp; 147,00 &emsp; Regular price</p>
                    <button class="btn btn-default add_field_button">Add another price</button>
                    <input type="hidden" id="allPricesData" name="all-prices-data">

                    {% for price in course.prices %}
                    <div id="addedPrices">
                        <input type="text" name="price_dot" placeholder="Price with dot" class="pricedot" value="{{price.price_dot}}">
                        <input type="text" name="price_comma" placeholder="Price with comma" class="pricecomma" value="{{price.price_comma}}">
                        <input type="text" name="price_summary" placeholder="Summary" class="pricesummary" value="{{price.summary}}">
                        <a href="#" class="remove_field">Remove</a>
                    </div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label>Currency</label>
                    <select class="form-control" name="currency" id="courseCurrency">
                        <option value="{{course.currency}}" selected>{{course.currency}}</option>
                        <option disabled>------</option>
                        <option value="EUR">EUR</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Image URL</label>
                    <p>Image h/w ratio should be 3/5</p>
                    <input type="text" class="form-control" value="{{course.image_url}}" placeholder="A link (URL) to the image" name="image_url" id="imageURL">
                </div>

                <div class="form-group">
                    <label>Summary (short description, up to 120 chars)</label>
                    <input type="text" class="form-control" value="{{course.summary}}" placeholder="Summary" name="summary" id="courseSummary">
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <p>See <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank">Markdown CheatSheet</a></p>
                    <textarea class="form-control" style="height: 300px;" name="description" id="markdown">{{course.description}}</textarea>
                </div>

                <button type="submit" class="btn btn-success" id="addCourseButton">Submit</button>
            </form>
        </div>
    </div>

    <br>
</div>
{% endblock main_content %}